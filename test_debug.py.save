from selenium import webdriver
from selenium.webdriver.chrome.service import Service as ChromeService
from webdriver_manager.chrome import ChromeDriverManager
import time

def test_debug():
    try:
        print("Устанавливаю ChromeDriver...")
        service = ChromeService(ChromeDriverManager().install())
        
        print("Запускаю браузер...")
        driver = webdriver.Chrome(service=service)
        
        try:
            print("Открываю страницу регистрации...")
            url = "https://stellarburgers.nomoreparties.site/register"
            driver.get(url)
            
            # Даем странице время загрузиться
            time.sleep(3)
            
            print("\nЗаголовок страницы:", driver.title)
            
            # Пробуем найти поле email разными способами
            print("\nПробую найти поле email...")
            
            # Вариант 1: По XPATH
            try:
                email_field = driver.find_element("xpath", "//input[@type='email']")
                print("Успех! Нашел поле по XPATH: //input[@type='email']")
            except Exception as e:
                print(f"Не удалось найти по XPATH: {str(e)}")
            
            # Вариант 2: По CSS селектору
            try:
                email_field = driver.find_element("css selector", "input[type=email]")
                print("Успех! Нашел поле по CSS: input[type=email]")
            except Exception as e:
                print(f"Не удалось найти по CSS: {str(e)}")
            
            # Вариант 3: По имени
            try:
                email_field = driver.find_element("name", "email")
                print("Успех! Нашел поле по имени: email")
            except Exception as e:
                print(f"Не удалось найти по имени: {str(e)}")
            
            # Если ни один вариант не сработал, выводим фрагмент кода
            print("\nВывожу фрагмент HTML-кода страницы:")
            print(driver.page_source[:2000])  # Первые 2000 символов
            
            print("\nСкриншот страницы сохранен как debug_screenshot.png")
            driver.save_screenshot("debug_screenshot.png")
            
        finally:
            print("Закрываю браузер...")
            driver.quit()
    
    except Exception as e:
        print(f"\nПроизошла ошибка: {str(e)}")

    print("\nТест завершен!")

if __name__ == "__main__":
    test_debug()
